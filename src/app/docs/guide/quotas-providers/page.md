---
dimensions:
  type:
    primary: getting-started
    detail: dashboard
  level: beginner
standard_title: 供应商配额
language: zh
---

# 供应商配额

供应商配额页面用于集中查看和管理所有 AI 服务供应商的配额使用情况。通过直观的可视化界面,管理员可以实时监控各供应商的金额消耗和并发使用率。

## 页面概览

页面顶部显示标题和当前配置的供应商总数统计。主体区域分为工具栏和供应商列表两部分。

## 工具栏功能

### 类型筛选

通过供应商类型下拉菜单,可以筛选显示特定类型的供应商:

- **全部** - 显示所有供应商
- **Claude** - 标准 Anthropic API
- **Claude-Auth** - Claude 中转服务
- **Codex** - OpenAI Codex/Response API
- **Gemini** - Google Gemini API
- **Gemini CLI** - Gemini CLI 格式
- **OpenAI Compatible** - OpenAI 兼容 API

### 排序选项

支持按以下维度对供应商进行排序:

- **名称** - 按供应商名称字母顺序排列
- **优先级** - 按优先级数值升序排列(数值越小优先级越高)
- **权重** - 按权重数值降序排列(数值越大权重越高)
- **使用率** - 按当前最高配额使用率降序排列

### 搜索功能

提供实时搜索框,支持按供应商名称进行模糊匹配。搜索采用 300ms 防抖处理,输入后自动过滤匹配的供应商。搜索框右侧有清除按钮,可快速清空搜索内容。

### 筛选统计

工具栏下方显示当前筛选结果统计,格式为"显示 X / Y 个供应商"。若进行了搜索,则显示"找到 X 个结果"。

## 供应商列表

供应商列表分为两个区域:有限额配置的供应商和无限额配置的供应商。

### 有限额供应商列表

每个供应商条目包含以下信息:

#### 左侧信息区

- **启用状态图标** - 绿色勾选表示已启用,灰色叉号表示已禁用
- **供应商类型图标** - 显示对应类型的图标和背景色
- **供应商名称** - 显示供应商配置的名称
- **优先级和权重徽章** - 格式为"P:优先级 W:权重"

#### 中间配额指标区

以圆形进度图的形式展示各项配额的使用情况。每个指标包含:

- **标签** - 显示配额类型(5小时限额/每日限额/周限额/月限额/并发Session)
- **圆环进度** - 可视化当前使用量与限额的比例
- **重置倒计时** - 显示距离下次重置的剩余时间

鼠标悬停在任意配额指标上,会显示详细的 Tooltip 信息:
- 当前已使用金额(按系统货币设置格式化显示)
- 配额上限金额
- 当前使用百分比

支持显示的配额类型:

| 配额类型 | 说明 |
|---------|------|
| 5小时限额 | 滚动5小时窗口内的金额限制 |
| 每日限额 | 每日金额限制,支持固定时间或滚动窗口重置 |
| 周限额 | 每周金额限制,自然周重置 |
| 月限额 | 每月金额限制,自然月重置 |
| 并发Session | 同时活跃的会话数量限制 |

{% callout type="note" title="配额显示规则" %}
只有设置了具体限额值(大于0)的配额类型才会显示在界面上。未设置限额的供应商会被归类到"无限额"区域。
{% /callout %}

### 无限额供应商区域

未配置任何限额的供应商会被折叠显示在页面底部。点击折叠区域的标题可以展开查看完整列表。展开后显示供应商名称和"未设置限额"提示。

折叠标题显示格式为"无限额供应商 (X 个)"。

## 配额修改

供应商配额页面为只读监控视图。如需修改某个供应商的配额配置,请前往**设置 > 供应商管理**页面,在对应供应商的编辑对话框中进行配置。

可配置的限额参数包括:

| 参数 | 说明 |
|-----|------|
| 5小时金额限制 | 滚动5小时窗口内允许的最大消费金额 |
| 每日金额限制 | 每日允许的最大消费金额 |
| 每日重置模式 | `fixed`(固定时间重置)或 `rolling`(滚动24小时窗口) |
| 每日重置时间 | 固定模式下的重置时间,格式为 HH:mm |
| 周金额限制 | 每周允许的最大消费金额 |
| 月金额限制 | 每月允许的最大消费金额 |
| 并发会话限制 | 该供应商同时允许的最大活跃会话数 |

## 数据刷新

页面数据在加载时从数据库和 Redis 获取最新状态。配额使用量通过批量查询获取,避免了 N+1 查询问题。如需查看最新数据,请刷新页面。

{% callout type="warning" title="性能优化" %}
系统采用批量查询优化,50个供应商仅需 2 次数据库查询和 2 次 Redis Pipeline 查询,相比逐个查询大幅提升了性能。
{% /callout %}

## 空状态处理

当没有匹配的供应商时(例如搜索无结果或筛选后无数据),页面会显示友好的空状态提示:

- 若是搜索导致的空结果,提示"没有找到匹配的供应商"
- 若是没有配置任何供应商,提示"暂无供应商"
